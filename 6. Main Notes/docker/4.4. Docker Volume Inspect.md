# 4.4. Docker Volume Inspect

2025-08-09 18:48
Status: #DONE 
Tags: [[Docker]]

---
The `docker volume inspect` command is used to get detailed information about a Docker volume. Let's break down each line of the output in a human-friendly way:

### Output:

![[4.4_result_inspect.png]]

### Explanation of Each Line:

1. **`"CreatedAt": "2025-04-04T04:09:12+03:30"`**
   - **What it means:** This is the timestamp when the volume was created.
   - **Details:** The format is ISO 8601, which includes the date (`2025-04-04`), time (`04:09:12`), and timezone offset (`+03:30`). This tells you exactly when the volume was first initialized.

2. **`"Driver": "local"`**
   - **What it means:** This indicates the storage driver being used for the volume.
   - **Details:** In this case, the driver is `"local"`, which means the volume is stored on the local filesystem of the Docker host. Other drivers might include network-based storage solutions like NFS or cloud storage providers.

3. **`"Labels": null`**
   - **What it means:** Labels are metadata that can be attached to a volume for organizational purposes.
   - **Details:** Here, `"null"` means no labels have been assigned to this volume. Labels can be added using the `--label` option when creating the volume.

4. **`"Mountpoint": "/var/lib/docker/volumes/myvol/_data"`**
   - **What it means:** This is the path on the host machine where the volume is mounted.
   - **Details:** When containers use this volume, they access files stored at this location. The path `/var/lib/docker/volumes/myvol/_data` is where Docker stores the actual data for the volume named `myvol`.

5. **`"Name": "myvol"`**
   - **What it means:** This is the name of the volume.
   - **Details:** You can refer to this volume by its name when mounting it into containers. For example, you might use `docker run -v myvol:/container/path ...` to mount this volume into a container.

6. **`"Options": null`**
   - **What it means:** Options allow you to configure specific behaviors for the volume driver.
   - **Details:** Since it's `"null"`, no additional options have been set for this volume. Options could include things like setting permissions or specifying storage parameters, depending on the driver.

7. **`"Scope": "local"`**
   - **What it means:** This specifies the scope of the volume.
   - **Details:** `"local"` means the volume is only accessible on the current Docker host. If you were using a distributed storage solution, the scope might indicate that the volume is shared across multiple hosts.

## Which containers use which volumes and which volumes are owned by which containers

#### **1. `docker ps -a --filter volume=myvol`**
<mark style="background: #FFB86CA6;">This command lists all containers (running or stopped) that use a specific volume (`myvol` in this case)</mark>. The `--filter volume=<volume_name>` option filters containers based on the specified volume.

- **Purpose**: To find which containers are using a specific volume.
- **Key Components**:
  - `docker ps -a`: Lists all containers (both running and stopped).
  - `--filter volume=<volume_name>`: Filters the list to only include containers using the specified volume.

#### **2. `docker inspect --format='{{json .Mounts}}' centos_with_vol_2 | jq '.[] | select(.Type == "volume") | .Name'`**
<mark style="background: #FFB86CA6;">This command retrieves the names of volumes mounted by a specific container (`centos_with_vol_2` in this case).</mark>

- **Purpose**: To find which volumes are owned (used) by a specific container.
- **Key Components**:
  - `docker inspect --format='{{json .Mounts}}'`: Extracts the `.Mounts` field from the container's metadata as JSON.
  - `jq '.[] | select(.Type == "volume") | .Name'`: Parses the JSON output to filter only entries of type `"volume"` and extracts their `Name` fields.

### Blueprint for the Topic: "Which Containers Use Which Volumes and Which Volumes Are Owned by Which Containers"

#### **1. Find Containers Using a Specific Volume**
To determine which containers use a specific volume:
```bash
docker ps -a --filter volume=VOLUME_NAME
```

- Replace `VOLUME_NAME` with the name of the volume you want to query.

#### **2. Find Volumes Used by a Specific Container**
To determine which volumes are used by a specific container:
```bash
docker inspect --format='{{json .Mounts}}' CONTAINER_NAME | jq '.[] | select(.Type == "volume") | .Name'
```

- Replace `CONTAINER_NAME` with the name of the container you want to query.

### How It Works Together
- Use **Command 1** (`docker ps -a --filter volume=VOLUME_NAME`) to answer: *"Which containers are using a specific volume?"*
- Use **Command 2** (`docker inspect --format='{{json .Mounts}}' CONTAINER_NAME | jq ...`) to answer: *"Which volumes are owned/used by a specific container?"*

These two commands provide a complete mapping between containers and volumes in both directions.

![[4.4_finding_vols_containers.png]]
