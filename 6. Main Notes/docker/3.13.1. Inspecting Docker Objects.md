## Exploring Docker Inspect: A Deep Dive into Docker Objects

Let’s take a closer look at the `docker inspect` command, which is a powerful tool for getting detailed information about various Docker objects. These objects can be an image, a container, a volume, or a network. The command takes the object as an argument and returns a JSON output with all the nitty-gritty details. I’ll walk you through two examples: inspecting an image and a container, while adding some extra insights and clarifications along the way.

### Docker Inspect Command Syntax
```bash
docker inspect [OPTIONS] NAME|ID [NAME|ID...]
```

### Inspecting a Docker Image: `docker inspect centos:centos7.9.2009`

```bash
docker inspect centos:centos7.9.2009
```

```bash
[
    {
        "Id": "sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9",
        "RepoTags": [
            "centos:centos7.9.2009",
            "mycentos:v3"
        ],
        "RepoDigests": [
            "centos@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4"
        ],
        "Parent": "",
        "Comment": "",
        "Created": "2021-09-15T18:20:23.99863383Z",
        "DockerVersion": "20.10.7",
        "Author": "",
        "Config": {
            "Hostname": "",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/bash"
            ],
            "Image": "sha256:ba35a4b787c8f11e3b6ed9248c7663b4f27459e9715a1ace09f966259d5ebc3a",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "org.label-schema.build-date": "20201113",
                "org.label-schema.license": "GPLv2",
                "org.label-schema.name": "CentOS Base Image",
                "org.label-schema.schema-version": "1.0",
                "org.label-schema.vendor": "CentOS",
                "org.opencontainers.image.created": "2020-11-13 00:00:00+00:00",
                "org.opencontainers.image.licenses": "GPL-2.0-only",
                "org.opencontainers.image.title": "CentOS Base Image",
                "org.opencontainers.image.vendor": "CentOS"
            }
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 203936249,
        "GraphDriver": {
            "Data": {
                "MergedDir": "/var/lib/docker/overlay2/16b6473a2bdfe9e9c68a807035c0c0289548da6e8123a24fa70356903b9994d0/merged",
                "UpperDir": "/var/lib/docker/overlay2/16b6473a2bdfe9e9c68a807035c0c0289548da6e8123a24fa70356903b9994d0/diff",
                "WorkDir": "/var/lib/docker/overlay2/16b6473a2bdfe9e9c68a807035c0c0289548da6e8123a24fa70356903b9994d0/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:174f5685490326fc0a1c0f5570b8663732189b327007e47ff13d2ca59673db02"
            ]
        },
        "Metadata": {
            "LastTagTime": "2025-03-26T05:05:04.029744636+03:30"
        }
    }
]
```

When you run the command `docker inspect centos:centos7.9.2009`, Docker provides a detailed JSON output about the specified image. Let’s break down some key parts of this output:

- **Image ID and Tags**  
  The image has an ID of `sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9`. It’s tagged as `centos:centos7.9.2009` and also has a custom tag `mycentos:v3`, which means someone likely added this tag manually using `docker tag`.

- **Creation Date and Docker Version**  
  This image was created on `2021-09-15T18:20:23.99863383Z` using Docker version `20.10.7`. This gives you a sense of how old the image is and the Docker version used to build it.

- **Configuration Details**  
  The `Config` section tells us how the image is set up to run:
  - The default command (`Cmd`) is `/bin/bash`, meaning if you run a container from this image without specifying a command, it’ll start a Bash shell.
  - The `Env` field shows the environment variables, like the `PATH`, which is set to standard Linux paths for executables.
  - The `Labels` provide metadata, such as the image’s build date (`2020-11-13`), license (`GPLv2`), and vendor (`CentOS`). These labels follow the Open Containers Initiative (OCI) standards, which are useful for tracking image provenance.

- **Architecture and OS**  
  The image is built for `amd64` architecture and the `linux` operating system, confirming it’s meant for 64-bit Linux systems.

- **Size and Storage**  
  The image size is `203936249` bytes (roughly 204 MB). The `GraphDriver` section shows it uses the `overlay2` storage driver, which is Docker’s default for most modern Linux systems. The `MergedDir`, `UpperDir`, and `WorkDir` paths indicate where the image’s filesystem layers are stored on the host.

- **RootFS and Layers**  
  The `RootFS` section lists the image’s layers, with a single layer here: `sha256:174f5685490326fc0a1c0f5570b8663732189b327007e47ff13d2ca59673db02`. Docker images are built from layers, and this image has just one, which is typical for a base image like CentOS.

- **Metadata**  
  The `LastTagTime` shows when the image was last tagged, which is `2025-03-26T05:05:04.029744636+03:30`. This timestamp suggests some recent activity, like retagging the image.

**Additional Insight**: The `centos:centos7.9.2009` image is a specific version of the CentOS 7 base image. CentOS 7 reached its end of life (EOL) on June 30, 2024, meaning it no longer receives updates or security patches. If you’re using this image in production, you might want to consider upgrading to a supported version, like CentOS Stream or another Linux distribution, to avoid security risks.

---

### Inspecting a Docker Container: `docker inspect 440b2afc20b0`

```bash
docker inspect 440b2afc20b0
```

```
[
    {
        "Id": "440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5",
        "Created": "2025-03-27T15:50:58.213390365Z",
        "Path": "/bin/bash",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 29482,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-03-27T15:50:58.273004551Z",
            "FinishedAt": "0001-01-01T00:00:00Z"
        },
        "Image": "sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9",
        "ResolvConfPath": "/var/lib/docker/containers/440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5/hostname",
        "HostsPath": "/var/lib/docker/containers/440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5/hosts",
        "LogPath": "/var/lib/docker/containers/440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5/440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5-json.log",
        "Name": "/epic_herschel",
        "RestartCount": 0,
        "Driver": "overlay2",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": null,
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {}
            },
            "NetworkMode": "bridge",
            "PortBindings": {},
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                48,
                104
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "private",
            "Dns": [],
            "DnsOptions": [],
            "DnsSearch": [],
            "ExtraHosts": null,
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": [],
            "BlkioDeviceReadBps": [],
            "BlkioDeviceWriteBps": [],
            "BlkioDeviceReadIOps": [],
            "BlkioDeviceWriteIOps": [],
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": [],
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": null,
            "PidsLimit": null,
            "Ulimits": [],
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": {
                "ID": "440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5",
                "LowerDir": "/var/lib/docker/overlay2/16791c9c642094de1471ba1e459f53940cd3d89ab6ba10b49b7094f7be016222-init/diff:/var/lib/docker/overlay2/16b6473a2bdfe9e9c68a807035c0c0289548da6e8123a24fa70356903b9994d0/diff",
                "MergedDir": "/var/lib/docker/overlay2/16791c9c642094de1471ba1e459f53940cd3d89ab6ba10b49b7094f7be016222/merged",
                "UpperDir": "/var/lib/docker/overlay2/16791c9c642094de1471ba1e459f53940cd3d89ab6ba10b49b7094f7be016222/diff",
                "WorkDir": "/var/lib/docker/overlay2/16791c9c642094de1471ba1e459f53940cd3d89ab6ba10b49b7094f7be016222/work"
            },
            "Name": "overlay2"
        },
        "Mounts": [],
        "Config": {
            "Hostname": "440b2afc20b0",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "Tty": true,
            "OpenStdin": true,
            "StdinOnce": false,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/bash"
            ],
            "Image": "centos:centos7.9.2009",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {
                "org.label-schema.build-date": "20201113",
                "org.label-schema.license": "GPLv2",
                "org.label-schema.name": "CentOS Base Image",
                "org.label-schema.schema-version": "1.0",
                "org.label-schema.vendor": "CentOS",
                "org.opencontainers.image.created": "2020-11-13 00:00:00+00:00",
                "org.opencontainers.image.licenses": "GPL-2.0-only",
                "org.opencontainers.image.title": "CentOS Base Image",
                "org.opencontainers.image.vendor": "CentOS"
            }
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "c4f6860ed5cd45822727eb6a583a4724a30a1bbb7626a2111b1357459bb8635f",
            "SandboxKey": "/var/run/docker/netns/c4f6860ed5cd",
            "Ports": {},
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "ca35b439f5579627d56af83ee420aef37fe0abd151f41050b520ea9ed42d1801",
            "Gateway": "172.17.0.1",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "172.17.0.2",
            "IPPrefixLen": 16,
            "IPv6Gateway": "",
            "MacAddress": "72:70:72:81:a2:cc",
            "Networks": {
                "bridge": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "MacAddress": "72:70:72:81:a2:cc",
                    "DriverOpts": null,
                    "GwPriority": 0,
                    "NetworkID": "0711f09c68e08fa8bb2e2936edf61c3b9b29c24c33a1306c490c6b7a7ea37000",
                    "EndpointID": "ca35b439f5579627d56af83ee420aef37fe0abd151f41050b520ea9ed42d1801",
                    "Gateway": "172.17.0.1",
                    "IPAddress": "172.17.0.2",
                    "IPPrefixLen": 16,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DNSNames": null
                }
            }
        }
    }
]
```

Now, let’s inspect the container with `docker inspect 440b2afc20b0`. The output provides a wealth of information about the container’s configuration and runtime state. Here are the highlights:

- **Container ID and Creation**  
  The container’s ID is `440b2afc20b07244f988aba3e7514700fed6c049e85959de4b1fdea0d6d00ab5`, and it was created on `2025-03-27T15:50:58.213390365Z`.

- **State**  
  The `State` section confirms the container is running (`"Status": "running"`, `"Running": true`). It started at `2025-03-27T15:50:58.273004551Z`, and its process ID (PID) on the host is `29482`. The `FinishedAt` field is set to a default value (`0001-01-01T00:00:00Z`) because the container hasn’t stopped yet.

- **Image Reference**  
  The `Image` field links back to the image we inspected earlier (`sha256:eeb6ee3f44bd0b5103bb561b4c16bcb82328cfe5809ab675bb17ab3a16c517c9`), confirming this container is indeed based on `centos:centos7.9.2009`.

- **Configuration**  
  The `Config` section mirrors much of the image’s configuration:
  - The `Cmd` is `/bin/bash`, inherited from the image.
  - The `Tty` and `OpenStdin` are set to `true`, indicating this container was likely started with `docker run -it` to enable an interactive terminal.
  - The `Labels` are the same as the image’s, since containers inherit labels from their base image unless overridden.

- **Storage and Filesystem**  
  Like the image, the container uses the `overlay2` storage driver. The `GraphDriver` section shows the filesystem layers, including a `LowerDir` that references the image’s layers and an `UpperDir` for the container’s writable layer. This writable layer captures any changes made inside the container (e.g., new files or modifications).

- **Networking**  
  The `NetworkSettings` section reveals the container is using the default `bridge` network:
  - It has an IP address of `172.17.0.2` with a gateway of `172.17.0.1`.
  - The MAC address is `72:70:72:81:a2:cc`.
  - No ports are exposed (`Ports: {}`), which aligns with the `docker ps` output.

- **HostConfig**  
  The `HostConfig` section provides runtime settings:
  - The `NetworkMode` is `bridge`, Docker’s default networking mode, which isolates the container on a virtual network.
  - The `LogConfig` uses the `json-file` type, meaning container logs are stored in JSON format at the path specified in `LogPath`.
  - The `MaskedPaths` and `ReadonlyPaths` enhance security by restricting access to sensitive host paths, like `/proc/kcore` or `/proc/sys`.

**Additional Insight**: The `ShmSize` is set to `67108864` bytes (64 MB), which is the default shared memory size for the container. If your application needs more shared memory (e.g., for databases), you can increase this with the `--shm-size` flag when running the container. Also, the `CgroupnsMode` is `private`, meaning the container has its own cgroup namespace, which is the default in newer Docker versions for better isolation.

### Why Use `docker inspect`?

The `docker inspect` command is invaluable for debugging and understanding your Docker objects. For an image, it tells you about its configuration, layers, and metadata. For a container, it provides runtime details like its state, networking, and storage. Whether you’re troubleshooting a container that won’t start or verifying an image’s architecture, `docker inspect` gives you the full picture.

### Table of Arguments and Parameters

| **Parameter/Option**         | **Description**                                                                                 | **Example**                                                                               |                              |
| ---------------------------- | ----------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | ---------------------------- |
| **Global Options**           |                                                                                                 |                                                                                           |                              |
| `-D, --debug`                | Enable debug mode (global option).                                                              | `docker --debug inspect mycontainer`                                                      |                              |
| `-H, --host`                 | Specify the Docker daemon socket to connect to (global option).                                 | `docker -H unix:///var/run/docker.sock inspect mycontainer`                               |                              |
| `--tls`                      | Use TLS; implied by `--tlsverify` (global option).                                              | `docker --tls inspect mycontainer`                                                        |                              |
| `--tlscacert`                | Trust certs signed only by this CA (global option).                                             | `docker --tlscacert ~/ca.pem inspect mycontainer`                                         |                              |
| `--tlscert`                  | Path to TLS certificate file (global option).                                                   | `docker --tlscert ~/cert.pem inspect mycontainer`                                         |                              |
| `--tlskey`                   | Path to TLS key file (global option).                                                           | `docker --tlskey ~/key.pem inspect mycontainer`                                           |                              |
| `--tlsverify`                | Use TLS and verify the remote (global option).                                                  | `docker --tlsverify inspect mycontainer`                                                  |                              |
| `-v, --version`              | Show the Docker version information (global option).                                            | `docker -v`                                                                               |                              |
| **Inspect-Specific Options** |                                                                                                 |                                                                                           |                              |
| `-f, --format`               | Format the output using a Go template.                                                          | `docker inspect -f '{{.Id}}' mycontainer`                                                 |                              |
| `-s, --size`                 | Display total file sizes for containers (only applicable to containers).                        | `docker inspect --size mycontainer`                                                       |                              |
| `--type`                     | Specify the type of object to inspect (`container`, `image`, `volume`, `network`, or `plugin`). | `docker inspect --type container mycontainer`                                             |                              |
| **Positional Arguments**     |                                                                                                 |                                                                                           |                              |
| `NAME`                       | `ID`                                                                                            | The name or ID of the Docker object (container, image, volume, network, etc.) to inspect. | `docker inspect mycontainer` |

### **Detailed Explanation of Parameters**

#### **Global Options**
These options are not specific to `docker inspect` but apply to all Docker commands:
- **`-D, --debug`**: Enables debug-level logging for Docker commands.
- **`-H, --host`**: Specifies the Docker daemon socket to connect to. Useful for remote Docker daemons.
- **TLS-related options (`--tls`, `--tlscacert`, `--tlscert`, `--tlskey`, `--tlsverify`)**: These are used to configure secure communication with the Docker daemon using Transport Layer Security (TLS).
- **`-v, --version`**: Displays the Docker client and server version.

#### **Inspect-Specific Options**
These options are unique to the `docker inspect` command:
- **`-f, --format`**:
  - Allows you to customize the output format using Go templates.
  - Example: Extract only the container ID:
    ```bash
    docker inspect -f '{{.Id}}' mycontainer
    ```
  - Example: Get the IP address of a container:
    ```bash
    docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mycontainer
    ```

- **`-s, --size`**:
  - Only works for containers.
  - Adds information about the total file sizes of the container's writable layers.
  - Example:
    ```bash
    docker inspect --size mycontainer
    ```

- **`--type`**:
  - Explicitly specifies the type of object to inspect.
  - Useful when multiple objects share the same name or ID.
  - Supported types: `container`, `image`, `volume`, `network`, `plugin`.
  - Example:
    ```bash
    docker inspect --type volume myvolume
    ```

#### **Positional Arguments**
- **`NAME|ID`**:
  - The name or ID of the Docker object you want to inspect.
  - Can be a container, image, volume, network, or plugin.
  - Multiple objects can be specified (space-separated).
  - Example:
    ```bash
    docker inspect mycontainer1 mycontainer2
    ```

### **Output Format**
The default output of `docker inspect` is a JSON array containing detailed information about the specified object(s). Each object's metadata is represented as a JSON object with various fields, such as:
- **Containers**: State, Config, NetworkSettings, Mounts, etc.
- **Images**: Architecture, Layers, Size, etc.
- **Volumes**: Driver, Mountpoint, Labels, etc.
- **Networks**: Subnet, Gateway, Containers connected, etc.

### **Examples**

1. **Inspect a Container**:
   ```bash
   docker inspect mycontainer
   ```

2. **Inspect an Image**:
   ```bash
   docker inspect myimage
   ```

3. **Inspect a Volume**:
   ```bash
   docker inspect myvolume
   ```

4. **Format Output Using a Template**:
   - Extract the container's state:
     ```bash
     docker inspect -f '{{.State.Status}}' mycontainer
     ```
   - Get the IP address of a container:
     ```bash
     docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mycontainer
     ```

5. **Inspect Multiple Objects**:
   ```bash
   docker inspect mycontainer1 mycontainer2
   ```

6. **Inspect with Size Information**:
   ```bash
   docker inspect --size mycontainer
   ```

7. **Specify Object Type**:
   ```bash
   docker inspect --type network mynetwork
   ```
