# 1.13. User Creation

2025-09-30 05:07
Status: #DONE 
Tags: [[Linux]]

---
# Understanding User Creation and Password Assignment in Linux

## Abstract

This document provides a beginner-friendly explanation of the `useradd` command in Linux, detailing how it creates a new user, assigns a group, and sets up a home directory, all executed with root privileges. It emphasizes the importance of setting a password using `passwd` and clarifies that the command’s code, not a specific user, performs these actions. Practical examples and best practices are included.

## Introduction to User Creation with `useradd`

In Linux, the `useradd` command is used to create new users, automating tasks like group creation and home directory setup. These actions are carried out by the command’s underlying code, which requires root privileges. This guide explores the process, highlights the necessity of setting a password with `passwd`, and provides clear examples for new users.

## How `useradd` Works

When you run a command like `useradd Arman`, the following happens, driven by the command’s code rather than a specific user:
- **Creates a New User**: Adds "Arman" to the system’s user database (e.g., `/etc/passwd`).
- **Creates a Group**: Generates a group named "arman" (unless overridden), ensuring the user belongs to at least one group.
- **Sets Up Home Directory**: Establishes a home directory, typically `/home/arman`, using the `-m` option (e.g., `useradd -m Arman`).
- **Root Privileges**: All these actions require root permissions, typically via `sudo` (e.g., `sudo useradd Arman`).

*Example*: `sudo useradd -m Arman` creates Arman with `/home/arman`.
*Additional Example*: `sudo useradd -m -d /custom/home Dorsa` sets Dorsa’s home to `/custom/home`.
*Best Practice*: Always use `sudo` to ensure root-level execution and avoid errors.

## Importance of Setting a Password with `passwd`

After creating a user, the account remains unusable until a password is set, as Linux requires authentication for login. The `passwd` command assigns or changes a password for the specified user, again requiring root privileges for initial setup.

*Example*: After `sudo useradd -m Arman`, run `sudo passwd Arman`. You’ll be prompted to enter and confirm a password (e.g., `mypassword`).
*Additional Example*: For Dorsa, `sudo passwd Dorsa` sets her password after creation.
*Process*: 
  - Enter `sudo passwd username`.
  - Input the new password twice when prompted.
  - The system updates `/etc/shadow` with the encrypted password.
*Best Practice*: Use strong passwords (e.g., `Ar12!man`) and consider `passwd -l username` to lock unused accounts.
*Tip*: If forgotten, root can reset with `sudo passwd username`.

## Key Considerations

- **Code-Driven Action**: The `useradd` and `passwd` commands’ code executes the tasks, not a user. Root privileges enable this automation.
- **Password Necessity**: Without `passwd`, the account is locked (e.g., `/etc/shadow` shows `!!` for no password), preventing login.
- **Verification**: After setup, use `id Arman` to confirm user and group details, and `ls -ld /home/arman` to check the home directory.

## Practical Example

Scenario: Adding a user "John" on a Linux system.
- Run `sudo useradd -m John` to create John with `/home/john`.
- Run `sudo passwd John`, then enter `JohnPass123!` twice.
- Log out and log in as John to verify access to `/home/john`.

## Summary Table of Commands

| Command         | Purpose                          | Example Usage                | Notes                              |
|-----------------|----------------------------------|------------------------------|------------------------------------|
| **useradd**     | Creates a new user and group.    | `sudo useradd -m Arman`      | Requires root; sets `/home/arman`. |
| **passwd**      | Sets or changes user password.   | `sudo passwd Arman`          | Mandatory for account use.         |